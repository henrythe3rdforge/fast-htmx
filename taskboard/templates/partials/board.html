<div class="grid grid-3">
{% for col in columns %}
<div>
    <h2 style="text-transform: capitalize; border-bottom: 2px solid var(--border); padding-bottom: 0.5rem;">{{ col }}</h2>
    {% for t in tasks if t.column == col %}
    <div class="card" style="display: flex; justify-content: space-between; align-items: start;">
        <span>{{ t.title }}</span>
        <div style="display: flex; gap: 0.25rem; flex-shrink: 0;">
            {% if col != "todo" %}
            <form hx-put="/tasks/{{ t.id }}/move" hx-target="#board" hx-swap="innerHTML" style="margin:0;">
                <input type="hidden" name="to" value="{{ columns[columns.index(col) - 1] }}">
                <button class="btn btn-outline" style="padding: 0.2rem 0.5rem; font-size: 0.75rem;">←</button>
            </form>
            {% endif %}
            {% if col != "done" %}
            <form hx-put="/tasks/{{ t.id }}/move" hx-target="#board" hx-swap="innerHTML" style="margin:0;">
                <input type="hidden" name="to" value="{{ columns[columns.index(col) + 1] }}">
                <button class="btn btn-outline" style="padding: 0.2rem 0.5rem; font-size: 0.75rem;">→</button>
            </form>
            {% endif %}
            <button class="btn btn-outline" style="padding: 0.2rem 0.5rem; font-size: 0.75rem;"
                hx-delete="/tasks/{{ t.id }}" hx-target="#board" hx-swap="innerHTML"
                hx-confirm="Delete task?">✕</button>
        </div>
    </div>
    {% endfor %}
    {% if not tasks|selectattr("column", "equalto", col)|list %}
    <p class="small muted" style="padding: 1rem 0;">No tasks</p>
    {% endif %}
</div>
{% endfor %}
</div>
